# ADR-001: Initial Technology Stack Selection

## Status
Accepted

## Context
We needed to choose a technology stack for building CUNY GradeLens, a web application that analyzes grade distributions and provides AI-powered insights about professors across CUNY campuses. The project was developed during a 3-day hackathon (CTP Hackathon, August 2025) as part of a team of 3, requiring rapid development and deployment.

Key requirements:
- Fast development velocity for hackathon timeline (3 days)
- AI-powered chatbot for natural language queries about professors and courses
- Data visualization for grade distributions with interactive charts
- Search functionality with fuzzy matching for professor names
- Real-time conversation history with context awareness
- Easy deployment to production (Vercel)

Key constraints:
- Limited time (3 days) - needed technologies with zero-to-production setup
- Team members had varying levels of experience with different technologies
- Need to process large CSV files (thousands of records per semester) with grade distribution data
- Integration with OpenAI API for AI features (cost and rate limit considerations)
- Responsive UI with modern design and dark mode support

## Decision
We will use **React 18 with Create React App** for the frontend because:
1. Zero-configuration setup enables immediate development start
2. Mature ecosystem with extensive documentation and community support
3. Component-based architecture facilitates code reuse and team collaboration
4. Seamless integration with Chart.js via react-chartjs-2 wrapper
5. React Router DOM provides declarative client-side routing

We will use **Express.js with Node.js** for the backend because:
1. Team familiarity with Express from previous projects reduces learning curve
2. RESTful API architecture enables clean separation between frontend and backend
3. Rich middleware ecosystem (CORS, Helmet, express-rate-limit) for security and performance
4. Modular route structure supports parallel development by team members
5. Straightforward deployment to Vercel with serverless functions

We will use **SQLite3** for data storage because:
1. Zero-configuration file-based database eliminates server setup overhead
2. ACID compliance ensures data integrity for concurrent operations
3. Lightweight and performant for our data volume (tens of thousands of records)
4. Portable database file simplifies backup and deployment
5. SQL support enables complex aggregations for grade statistics

We will use **OpenAI GPT-4 API** for AI features because:
1. State-of-the-art natural language understanding for conversational interface
2. Context-aware responses enable follow-up questions with pronouns ("her", "his")
3. Pre-trained model eliminates need for custom training data or ML infrastructure
4. Comprehensive SDK and documentation accelerate integration
5. Prompt engineering allows fine-tuning responses without model retraining

We will use **Chart.js with React-Chartjs-2** for data visualization because:
1. React wrapper provides declarative chart components
2. Multiple chart types (bar, pie, line) support diverse visualization needs
3. Responsive design adapts to different screen sizes automatically
4. Efficient rendering handles large datasets without performance degradation
5. Theme support enables dark mode compatibility

We will use **Tailwind CSS** for styling because:
1. Utility-first approach eliminates context switching between CSS and JSX
2. Consistent design system reduces UI inconsistencies
3. Responsive utilities simplify mobile-first development
4. PurgeCSS integration minimizes bundle size in production
5. Dark mode variant system enables theme switching

We will use **Node-cache** for in-memory caching because:
1. Reduces OpenAI API calls by ~60%, significantly lowering costs
2. Sub-millisecond response times for cached queries improve UX
3. Minimal API surface area simplifies implementation
4. Configurable TTL (30 minutes) balances freshness with performance

## Consequences

### Positive
- Achieved MVP in 3 days with full-stack functionality and AI integration
- React + Express architecture enabled parallel frontend/backend development
- SQLite eliminated database infrastructure overhead, allowing focus on features
- OpenAI GPT-4 delivered production-quality conversational AI without ML expertise
- Chart.js enabled interactive visualizations with minimal code
- Tailwind CSS accelerated UI development with consistent design system
- Node-cache reduced API costs by ~60% and improved response times significantly

### Negative
- SQLite write concurrency limitations may impact performance at scale (acceptable for hackathon)
- Separate frontend/backend required CORS configuration and deployment coordination
- OpenAI API costs scale with usage (mitigated by caching strategy)
- Create React App includes development dependencies in production bundle
- No built-in authentication limits personalization features (acceptable for MVP)

## Migration Plan

### Day 1: Foundation
- Initialized React frontend with Create React App and Tailwind CSS
- Set up Express backend with middleware (CORS, Helmet, rate limiting)
- Designed SQLite schema for grades and conversations databases
- Implemented CSV ingestion script with column name normalization
- Created REST API routes for grade data queries and professor search

### Day 2: Core Features
- Integrated OpenAI GPT-4 API with conversation context management
- Built chatbot interface with session-based conversation history
- Developed fuzzy matching service using Levenshtein distance algorithm
- Implemented regex-based entity extraction for professor names and course codes
- Created interactive data visualization components (bar charts, pie charts) with Chart.js
- Added advanced search with semester and course filtering

### Day 3: Refinement and Deployment
- Iterated on AI prompt engineering to improve response accuracy and relevance
- Implemented professor comparison feature with side-by-side grade analysis
- Enhanced UI with Tailwind CSS animations and dark mode toggle
- Fixed CSV parsing edge cases and improved data extraction robustness
- Configured Vercel deployment (vercel.json, build commands, environment variables)
- Removed Rate My Professor integration to focus on grade distribution data

## Alternatives Considered

### Option 1: Next.js (Full-Stack Framework)
- **Pros**: Unified framework reduces context switching, server-side rendering improves SEO, built-in API routes simplify deployment
- **Cons**: Learning curve for App Router, more opinionated structure limits flexibility, team had limited Next.js experience
- **Decision**: Chose React + Express for team familiarity, enabling faster development velocity

### Option 2: PostgreSQL or MongoDB
- **Pros**: Better scalability for large datasets, advanced query capabilities, cloud hosting with managed services
- **Cons**: Requires database server setup and configuration, more complex deployment pipeline, additional infrastructure costs
- **Decision**: Chose SQLite for zero-configuration setup, eliminating infrastructure overhead during hackathon

### Option 3: Prisma ORM
- **Pros**: Type-safe database queries prevent runtime errors, migration system simplifies schema evolution, excellent developer experience
- **Cons**: Additional dependency increases bundle size, learning curve for team, overkill for simple SQLite schema
- **Decision**: Used raw SQLite3 for direct control, simpler debugging, and faster implementation

### Option 4: Recharts or D3.js
- **Pros**: Recharts offers React-native API, D3.js provides extensive customization and advanced visualizations
- **Cons**: Recharts has smaller community, D3.js requires significant learning investment, both more complex for basic needs
- **Decision**: Chose Chart.js for proven reliability, extensive documentation, and rapid implementation

### Option 5: Custom NLP Solution
- **Pros**: No API costs, complete control over behavior, no rate limits
- **Cons**: Requires labeled training data, ML expertise, significant development time, ongoing maintenance
- **Decision**: Chose OpenAI GPT-4 for immediate production-ready capabilities, enabling focus on application features

## Notes
- Initially integrated Rate My Professor API but removed on Day 3 to focus exclusively on grade distribution data analysis
- AI prompt engineering required 5+ iterations to achieve accurate, context-aware responses with proper data grounding
- CSV ingestion script handles 10+ column name variations (TERM/term/Term, PROF/Prof/professor, etc.) through normalization mapping
- Vercel deployment encountered timeout issues requiring build command optimization and rootDirectory configuration
- Conversation history implementation on Day 2 enabled pronoun resolution ("her", "his", "their") for follow-up questions
- Fuzzy matching service with 0.6 similarity threshold successfully handles common typos and name variations
- Team collaboration: Huzayfah focused on AI recommendations, professor comparison, and UI enhancements
- Future: Consider PostgreSQL migration if data volume exceeds SQLite's practical limits (>100GB)
- Future: Add user authentication (Clerk/Auth0) to enable personalized course recommendations and saved searches

